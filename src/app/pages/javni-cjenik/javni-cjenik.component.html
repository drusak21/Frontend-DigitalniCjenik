<div class="mobile-container">
  <!-- Header -->
  <div class="header">
    <div class="header-top">
      <h1>{{ objektNaziv }}</h1>
      <div class="header-actions">
        <button (click)="promijeniJezik()" class="lang-btn">
          {{ jezik }}
        </button>
        
         @if (!isLoggedIn) {
      <a routerLink="/login" class="login-link">{{ getText('prijava') }}</a>
    } @else {
      <button (click)="logout()" class="logout-btn">Odjava</button>
    }
      </div>
    </div>
    
    <div class="qr-info">
      <small>{{ getText('qrKod') }}: {{ qrKod }}</small>
    </div>
  </div>

  <!-- Loading State -->
  @if (loading) {
    <div class="loading">
      <div class="loading-spinner"></div>
      <p>{{ getText('ucitavanje') }}</p>
    </div>
  }

  <!-- Error State -->
  @if (error && !loading) {
    <div class="error-state">
      <div class="error-icon">‚ö†Ô∏è</div>
      <p>{{ getText('error') }}</p>
      <button (click)="ucitajPodatke()" class="retry-btn">
        {{ getText('pokusajPonovo') }}
      </button>
    </div>
  }

  <!-- Content -->
  @if (!loading && !error) {
    @if (kategorije.length === 0) {
      <div class="empty-state">
        <p>{{ getText('nemaArtikala') }}</p>
      </div>
    }

    <!-- Kategorije -->
    @if (kategorije.length > 0) {
      <div class="kategorije-container">
        <div class="kategorije-scroll">
          @for (kategorija of sveKategorije; track kategorija.id) {
            <button 
              class="kategorija-btn"
              [class.active]="aktivnaKategorija === kategorija.id"
              (click)="promijeniKategoriju(kategorija.id)">
              @if (kategorija.id === 0) {
                {{ getText('sve') }}
              } @else {
                {{ getNazivKategorije(kategorija) }}
              }
            </button>
          }
        </div>
      </div>
    }

    <!-- Proizvodi -->
    <div class="proizvodi-container">
      @if (aktivnaKategorija === 0) {
        <!-- Prika≈æi sve kategorije -->
        @for (kategorija of kategorije; track kategorija.id) {
          <div class="kategorija-section">
            <h2 class="kategorija-naslov">{{ getNazivKategorije(kategorija) }}</h2>
            @for (proizvod of kategorija.proizvodi; track proizvod.artiklID) {
              <div class="proizvod-card">
                <div class="proizvod-info">
                  <h3>{{ proizvod.artiklNaziv }}</h3>
                  @if (proizvod.zakljucan) {
                    <span class="brand-badge">Panonski Izvori</span>
                  }
                </div>
                <div class="proizvod-cijena">
                  {{ formatCijena(proizvod.cijena) }}
                </div>
              </div>
            }
          </div>
        }
      } @else {
        @for (kategorija of kategorije; track kategorija.id) {
          @if (kategorija.id === aktivnaKategorija) {
            <div class="kategorija-section">
              <h2 class="kategorija-naslov">{{ getNazivKategorije(kategorija) }}</h2>
              @for (proizvod of kategorija.proizvodi; track proizvod.artiklID) {
                <div class="proizvod-card">
                  <div class="proizvod-info">
                    <h3>{{ proizvod.artiklNaziv }}</h3>
                    @if (proizvod.zakljucan) {
                      <span class="brand-badge">Panonski Izvori</span>
                    }
                  </div>
                  <div class="proizvod-cijena">
                    {{ formatCijena(proizvod.cijena) }}
                  </div>
                </div>
              }
            </div>
          }
        }
      }
    </div>
  }

  <!-- Bottom Navigation (samo za prijavljene) -->
  @if (isLoggedIn) {
    <div class="bottom-nav">
      <a routerLink="/" class="nav-item" routerLinkActive="active">
        <span>üè†</span>
        <small>Poƒçetna</small>
      </a>
      
      @if (korisnikUloga === 'Administrator') {
        <a routerLink="/admin" class="nav-item" routerLinkActive="active">
          <span>üìä</span>
          <small>Admin</small>
        </a>
      }
      
      @if (korisnikUloga === 'Putnik') {
        <a routerLink="/putnik" class="nav-item" routerLinkActive="active">
          <span>üëÅÔ∏è</span>
          <small>Nadzor</small>
        </a>
      }
      
      @if (korisnikUloga === 'Ugostitelj') {
        <a routerLink="/ugostitelj" class="nav-item" routerLinkActive="active">
          <span>üìù</span>
          <small>Ureƒëivanje</small>
        </a>
      }
    </div>
  }
</div>